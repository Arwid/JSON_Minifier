(function(){
/*!
  JSON_Minifier
  
  Copyright 2011 Arwid Bancewicz
  Licensed under the MIT license
  http://www.opensource.org/licenses/mit-license.php
  
  @date 31 Aug 2011
  @author Arwid Bancewicz http://arwid.ca
  @version 0.2
  */
var a;a=(function(){var c,d,b;d=function(e){return _(e).chain().map(function(f){return _.keys(f)}).flatten().union().value()};({deepKeys:function(e,g){var h,f,i;if(g==null){g=[]}if(_.isArray(e)){e=e[0];for(f in e){i=e[f];g.push(f);if(_.isArray(i)){g.push(h=[]);_.deepKeys(i,h)}}}return g}});b=function(f,e){if(e==null){e=d(f)}return _(f).map(function(g){return _(e).map(function(h){return g[h]})})};({deepValues:function(m,l){var i,e,k,g,f,h,j;if(l==null){l=[]}if(_.isArray(m)){for(h=0,j=m.length;h<j;h++){g=m[h];l.push(i=[]);for(k in g){f=g[k];if(_.isArray(f)){i.push(e=[]);_.deepValues(f,e)}else{i.push(f)}}}}return l}});c=function(f,e){return _.map(e,function(m){var i,l,h,k,j,g;l={};h=0;for(j=0,g=m.length;j<g;j++){k=m[j];if(!_.isArray(k)){l[f[h++]]=k}else{l[f[h++]]=i=c(f[h++],k)}}return l})};return{minify:function(g,i){var f,e,h;if(i==null){i=false}if(_(g).isString()){g=JSON.parse(g)}e=_.deepKeys(g);f=_.deepValues(g);h={map:e,data:f};if(i){return JSON.stringify(h)}else{return h}},revert:function(g,f){var e;if(f==null){f=false}if(_(g).isString()){g=JSON.parse(g)}e=c(g.map,g.data);console.log(e);if(f){return JSON.stringify(e)}else{return e}}}})();_.mixin({JSON_minify:a.minify,JSON_revert:a.revert})}).call(this);
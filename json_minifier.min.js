(function(){
/*!
  JSON_Minifier
  
  Copyright 2011 Arwid Bancewicz
  Licensed under the MIT license
  http://www.opensource.org/licenses/mit-license.php
  
  @date 31 Aug 2011
  @author Arwid Bancewicz http://arwid.ca
  @version 0.2
  */
var a;a=(function(){var c,f,d,e,b;e=function(g){return _(g).chain().map(function(h){return _.keys(h)}).flatten().union().value()};f=function(g,i){var j,h,k;if(i==null){i=[]}if(_.isArray(g)){g=g[0];for(h in g){k=g[h];i.push(h);if(_.isArray(k)){i.push(j=[]);f(k,j)}}}return i};b=function(h,g){if(g==null){g=e(h)}return _(h).map(function(i){return _(g).map(function(j){return i[j]})})};d=function(o,n){var k,g,m,i,h,j,l;if(n==null){n=[]}if(_.isArray(o)){for(j=0,l=o.length;j<l;j++){i=o[j];n.push(k=[]);for(m in i){h=i[m];if(_.isArray(h)){k.push(g=[]);d(h,g)}else{k.push(h)}}}}return n};c=function(h,g){return _.map(g,function(o){var k,n,j,m,l,i;n={};j=0;for(l=0,i=o.length;l<i;l++){m=o[l];if(!_.isArray(m)){n[h[j++]]=m}else{n[h[j++]]=k=c(h[j++],m)}}return n})};return{minify:function(i,k){var h,g,j;if(k==null){k=false}if(_(i).isString()){i=JSON.parse(i)}g=f(i);h=d(i);j={map:g,data:h};if(k){return JSON.stringify(j)}else{return j}},revert:function(i,h){var g;if(h==null){h=false}if(_(i).isString()){i=JSON.parse(i)}g=c(i.map,i.data);console.log(g);if(h){return JSON.stringify(g)}else{return g}}}})();_.mixin({JSON_minify:a.minify,JSON_revert:a.revert})}).call(this);